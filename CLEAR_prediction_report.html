<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title> CLEAR Report</title>
        <link rel="stylesheet" type="text/css" href="CLEAR.css">
    </head>

    <body>

        <div class="first-div">
        <h1>CLEAR Report:&nbsp   <span class="CLEARdataset">
            PIMA</span></h1>
            <hr class="clear">
            <span class="main-text2"> Prediction to be explained:&nbsp Observation&nbsp<span class="AI_prob">5</span> has <span class="AI_prob">0.27</span> probability of diabetes </span>    
        <hr class="clear">
        <h2><i>b</i>-Counterfactual Results</h2>
        </div>   
        
        
        <div class="flexi-cont"> 
            <div class="actual-counterfactuals">
               <p class= "main-text">These are the results of carrying out a grid search on the <strong>target</strong>  AI system. <br><span class="smallerText">("Counterfactual value" = value needed to be at the decision boundary).</span> </p>  
              <p class= "counterfactual-table" > <table border="1" class="dataframe mystyle">
  <thead>
    <tr style="text-align: left;">
      <th>feature</th>
      <th>input value</th>
      <th>actual b-counterfactual value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Pregnancy</td>
      <td>-1.1</td>
      <td>-0.20</td>
    </tr>
    <tr>
      <td>Glucose</td>
      <td>0.57</td>
      <td>1.11</td>
    </tr>
    <tr>
      <td>DiabF</td>
      <td>0.11</td>
      <td>1.51</td>
    </tr>
    <tr>
      <td>Age</td>
      <td>-1</td>
      <td>-0.43</td>
    </tr>
  </tbody>
</table></p>
            </div>
            
            <div class= "reg-formula">
                <p id="regression-formula"><font size = "4.5">prediction =  [ 1 + e<sup><b>-w<sup>T</sup>x</sup></b> ]<sup> -1</sup></font size><br><br><font size = "4.5"><b><i>w</i></b><sup>T</sup><b><i>x</font size></i></b> =  -0.28 - 0.0045 BloodP + 0.22 Skin + 0.91 BMI + 0.65 Pregnancy + 1.6 Glucose + 0.18 Insulin + 0.39 DiabF + 0.9 Age - 0.23 BMI<sup>2</sup> + 0.43 (Insulin*Age) - 0.17 Glucose<sup>2</sup> + 0.21 (Insulin*BMI) + 0.14 (Insulin*DiabF) - 0.27 (Pregnancy*Age)</p>       
                
                <form  id="Simplify-regression">
                    <input type="checkbox" id="simplify" />
                    <label for="simplify">Simplify display of regression equation</label>	    	
	            </form>  
                
                <form>      
                    <fieldset id="Select-features">      
                        <legend>Select Features</legend>      
                        <button id="Select-button" type="button">Show</button>
                    </fieldset>      
                </form>
                <p class="main-text", id= "simplified-equation"> </p> <br>
            </div>
                   
            <div class="regression-counterfactuals">
                <p class="main-text"> Regression model's estimates of counterfactual values:</p>
                <br><br>
                <p class= "counterfactual-table" ><table border="1" class="dataframe mystyle">
  <thead>
    <tr style="text-align: left;">
      <th>feature</th>
      <th>estimated b-counterfactual value</th>
      <th>b-counterfactual fidelity error</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Pregnancy</td>
      <td>-0.14</td>
      <td>0.065</td>
    </tr>
    <tr>
      <td>Glucose</td>
      <td>1.3</td>
      <td>0.18</td>
    </tr>
    <tr>
      <td>DiabF</td>
      <td>2.4</td>
      <td>0.85</td>
    </tr>
    <tr>
      <td>Age</td>
      <td>-0.31</td>
      <td>0.12</td>
    </tr>
  </tbody>
</table></p>

            </div>
        </div>    
            
        
        <div class="clearfix"></div>
        <br>
     <hr>    
        <h2>Regression Information</h2> 
        <section class= "regress-section">
        <div class= "reg-div", id="reg-div">
            <p class="main-text"> Key Features.<br><span class="smallerText">(These are the features with largest absolute <em>coefficients</em>).</span>  
            </p>
            <p id="regression-table"><table border="1" class="dataframe mystyle">
  <thead>
    <tr style="text-align: left;">
      <th>feature</th>
      <th>input value</th>
      <th>coeff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Glucose</td>
      <td>0.57</td>
      <td>1.6</td>
    </tr>
    <tr>
      <td>BMI</td>
      <td>0.36</td>
      <td>0.91</td>
    </tr>
    <tr>
      <td>Age</td>
      <td>-1</td>
      <td>0.9</td>
    </tr>
    <tr>
      <td>Pregnancy</td>
      <td>-1.1</td>
      <td>0.65</td>
    </tr>
    <tr>
      <td>(Insulin_Age)</td>
      <td>-0.21</td>
      <td>0.43</td>
    </tr>
    <tr>
      <td>DiabF</td>
      <td>0.11</td>
      <td>0.39</td>
    </tr>
    <tr>
      <td>(Pregnancy_Age)</td>
      <td>1.2</td>
      <td>-0.27</td>
    </tr>
    <tr>
      <td>BMI_sqrd</td>
      <td>0.13</td>
      <td>-0.23</td>
    </tr>
    <tr>
      <td>Skin</td>
      <td>0.66</td>
      <td>0.22</td>
    </tr>
    <tr>
      <td>(Insulin_BMI)</td>
      <td>0.073</td>
      <td>0.21</td>
    </tr>
  </tbody>
</table> </p>       
        </div>
        
        <div class= "reg-GRAPH">
            <img src="CLEAR_plot.png" alt="Regression plot">         
        </div>

        <div>
             <p class="main-text3"> &nbsp Quality of regression statistic:<br><br>
                &nbsp prsquared =
            0.29</p>
        </div>    
       </section>
        
    
        
       <div id="feature-list"> 
           <p id="features"> ['Pregnancy', 'Glucose', 'BloodP', 'Skin', 'Insulin', 'BMI', 'DiabF', 'Age'] </p>  
           <p id="spreadsheet-data"> [-0.9791798879396091, 0.6633951470966376, 0.36490341726810677, -1.1302239383166055, 0.5695708116305739, 0.19952178346167707, 0.10602431151461583, -1.028469968015169, 0.13315450393394204, -0.2052021622551605, 0.3244109094615107, 0.0728061806045932, 0.021154159723692573, 1.1624013776904576] </p>  
           <p id="weights"> [-0.004529859825174695, 0.2236169721415584, 0.9092292233261048, 0.6537845911382816, 1.609623772619138, 0.18121579983767125, 0.3862601803653588, 0.8952049324462198, -0.23078546846286968, 0.4287269157689247, -0.17297969628997217, 0.21498466315280101, 0.13677838310826282, -0.2731995455326919] </p>
           <p id ="intercept">-0.27529294846367597</p>
           <p id ="regression-type">logistic</p>
       </div>
        
        
    <script src="CLEARapp.js"></script>
  </body>
</html>